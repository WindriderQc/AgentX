<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AgentX • Ollama Control</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="bg-grid"></div>
  <div class="page">
    <header class="hero">
      <div>
        <div class="eyebrow">GraphysX • Local agents</div>
        <div class="title-row">
          <h1>AgentX Control</h1>
          <span class="status-chip" id="statusChip">Idle</span>
        </div>
        <p class="lede">
          Chat with your local Ollama models, tune parameters, and keep conversations grounded in your system prompt.
        </p>
      </div>
      <div class="hero-stats">
        <div class="pill">
          <span class="label">Port</span>
          <strong>3080</strong>
        </div>
        <div class="pill">
          <span class="label">Messages</span>
          <strong id="statMessages">0</strong>
        </div>
        <div class="pill">
          <span class="label">Replies</span>
          <strong id="statReplies">0</strong>
        </div>
      </div>
    </header>

    <main class="layout">
      <section class="panel chat">
        <div class="panel-head">
          <div>
            <p class="eyebrow">Conversation</p>
            <h2>AI Dialogue</h2>
          </div>
          <div class="controls">
            <button class="ghost" id="clearBtn">Clear chat</button>
            <button class="primary" id="sendBtn">Send</button>
          </div>
        </div>

        <div class="chat-window" id="chatWindow">
          <div class="bubble assistant">
            <div class="meta">AgentX</div>
            <p>Hello! I’m online. Pick an Ollama model and let’s get started.</p>
          </div>
        </div>

        <div class="composer">
          <div class="quick-actions">
            <button class="chip" data-quick="What can you help me with?">Help</button>
            <button class="chip" data-quick="Summarize recent events.">Summary</button>
            <button class="chip" data-quick="List available tools.">Tools</button>
            <button class="chip" data-quick="Brainstorm next steps for my project.">Brainstorm</button>
          </div>
          <textarea id="messageInput" rows="3" placeholder="Type to your agent..."></textarea>
        </div>
      </section>

      <aside class="panel config">
        <div class="panel-head">
          <div>
            <p class="eyebrow">Ollama</p>
            <h2>Configuration</h2>
          </div>
          <button class="ghost" id="refreshModels">Refresh models</button>
        </div>

        <div class="field">
          <label>Target host</label>
          <div class="input-row">
            <input type="text" id="hostInput" list="hostPresets" value="localhost">
            <datalist id="hostPresets">
              <option value="localhost">
              <option value="127.0.0.1">
              <option value="192.168.2.12">
              <option value="192.168.2.99">
            </datalist>
            <input type="text" id="portInput" class="w-96" value="11434">
          </div>
        </div>

        <div class="field">
          <label>Model</label>
          <select id="modelSelect">
            <option value="">Load available models…</option>
          </select>
          <div class="hint">Models are pulled from the selected Ollama host.</div>
        </div>

        <div class="field">
          <label>System prompt</label>
          <textarea id="systemPrompt" rows="3">You are AgentX, a concise and capable local assistant. Keep answers brief and actionable.</textarea>
        </div>

        <div class="options-grid">
          <div class="field">
            <label>Temperature</label>
            <input type="range" id="temperature" min="0" max="2" step="0.05" value="0.7">
            <div class="value" data-for="temperature">0.7</div>
          </div>
          <div class="field">
            <label>Top P</label>
            <input type="range" id="topP" min="0" max="1" step="0.01" value="0.9">
            <div class="value" data-for="topP">0.9</div>
          </div>
          <div class="field">
            <label>Top K</label>
            <input type="number" id="topK" value="64" min="1" max="32000">
          </div>
          <div class="field">
            <label>Context (tokens)</label>
            <input type="number" id="numCtx" value="4096" min="256" max="32000" step="256">
          </div>
          <div class="field">
            <label>Repeat penalty</label>
            <input type="number" id="repeatPenalty" value="1.05" min="0" max="2" step="0.01">
          </div>
          <div class="field">
            <label>Presence penalty</label>
            <input type="number" id="presencePenalty" value="0" min="-2" max="2" step="0.01">
          </div>
          <div class="field">
            <label>Frequency penalty</label>
            <input type="number" id="frequencyPenalty" value="0" min="-2" max="2" step="0.01">
          </div>
          <div class="field">
            <label>Num predict</label>
            <input type="number" id="numPredict" value="256" min="16" max="4096" step="16">
          </div>
          <div class="field">
            <label>Seed</label>
            <input type="number" id="seed" value="" placeholder="random">
          </div>
          <div class="field">
            <label>Stop sequences</label>
            <input type="text" id="stopSequences" placeholder="e.g. ###,END">
          </div>
          <div class="field">
            <label>Keep alive</label>
            <input type="text" id="keepAlive" placeholder="e.g. 30s or -1">
            <div class="hint">Keep the model warm between calls.</div>
          </div>
        </div>

        <div class="action-row">
          <button class="ghost" id="saveDefaults">Save defaults</button>
          <button class="primary" id="testConnection">Test connection</button>
        </div>

        <div class="note" id="feedback">Waiting for configuration.</div>
      </aside>
    </main>
  </div>

  <script src="app.js"></script>
</body>
</html>
